{"version":3,"file":"animated-sprite.js","sourceRoot":"","sources":["../../../src/logic-node/ext/animated-sprite.ts"],"names":[],"mappings":"AAAA,OAAO,EAAmB,UAAU,EAAE,MAAM,qBAAqB,CAAA;AAGjE,OAAO,EAAE,UAAU,EAAqB,MAAM,qBAAqB,CAAA;AAOnE,MAAM,OAAO,kBAAkD,SAAQ,UAAa;IAClF,IAAI,GAAG,UAAU,CAAC,cAAc,CAAA;IAEhC,QAAQ,CAAQ;IAChB,YAAY,CAAQ;IAEpB,YAAY,OAAkC;QAC5C,KAAK,CAAC,OAAO,CAAC,CAAA;QACd,IAAI,CAAC,QAAQ,GAAG,OAAO,CAAC,KAAK,CAAA;QAC7B,IAAI,CAAC,YAAY,GAAG,OAAO,CAAC,SAAS,CAAA;IACvC,CAAC;IAEkB,iBAAiB,CAAC,QAAgB,EAAE,SAA0B,EAAE,aAA4B;QAC7G,MAAM,EAAE,GAAG,KAAK,CAAC,iBAAiB,CAAC,QAAQ,EAAE,SAAS,EAAE,aAAa,CAAC,CAAA;QACtE,SAAS,CAAC,UAAU,CAAC,EAAE,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAA;QACvC,SAAS,CAAC,cAAc,CAAC,EAAE,EAAE,IAAI,CAAC,YAAY,CAAC,CAAA;QAC/C,OAAO,EAAE,CAAA;IACX,CAAC;IAED,IAAI,SAAS,CAAC,SAAiB;QAC7B,IAAI,IAAI,CAAC,YAAY,KAAK,SAAS,EAAE,CAAC;YACpC,IAAI,CAAC,YAAY,GAAG,SAAS,CAAA;YAE7B,IAAI,IAAI,CAAC,EAAE,KAAK,SAAS,IAAI,IAAI,CAAC,SAAS,EAAE,CAAC;gBAC5C,IAAI,CAAC,SAAS,CAAC,cAAc,CAAC,IAAI,CAAC,EAAE,EAAE,SAAS,CAAC,CAAA;YACnD,CAAC;QACH,CAAC;IACH,CAAC;IAED,IAAI,SAAS;QACX,OAAO,IAAI,CAAC,YAAY,CAAA;IAC1B,CAAC;CACF","sourcesContent":["import { ObjectStateTree, ObjectType } from '@hydraengine/shared'\nimport { EventMap } from '@webtaku/event-emitter'\nimport { MessageBridge } from '../../message-bridge'\nimport { GameObject, GameObjectOptions } from '../core/game-object'\n\nexport type AnimatedSpriteNodeOptions = {\n  asset: number\n  animation: number,\n} & GameObjectOptions\n\nexport class AnimatedSpriteNode<E extends EventMap = EventMap> extends GameObject<E> {\n  type = ObjectType.AnimatedSprite\n\n  #assetId: number\n  #animationId: number\n\n  constructor(options: AnimatedSpriteNodeOptions) {\n    super(options)\n    this.#assetId = options.asset\n    this.#animationId = options.animation\n  }\n\n  protected override attachToStateTree(parentId: number, stateTree: ObjectStateTree, messageBridge: MessageBridge) {\n    const id = super.attachToStateTree(parentId, stateTree, messageBridge)\n    stateTree.setAssetId(id, this.#assetId)\n    stateTree.setAnimationId(id, this.#animationId)\n    return id\n  }\n\n  set animation(animation: number) {\n    if (this.#animationId !== animation) {\n      this.#animationId = animation\n\n      if (this.id !== undefined && this.stateTree) {\n        this.stateTree.setAnimationId(this.id, animation)\n      }\n    }\n  }\n\n  get animation() {\n    return this.#animationId\n  }\n}\n"]}