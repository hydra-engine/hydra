{"version":3,"file":"w.js","sourceRoot":"","sources":["../src/w.ts"],"names":[],"mappings":"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","sourcesContent":["import { ObjectStateTree } from '@hydraengine/shared'\n\nexport class LocalTransform {\n  #x = 0\n  #y = 0\n  #scaleX = 1\n  #scaleY = 1\n  #pivotX = 0\n  #pivotY = 0\n\n  #rotation = 0\n  #cos = 1\n  #sin = 0\n\n  #id?: number\n  #stateTree?: ObjectStateTree\n\n  get x() { return this.#x }\n  set x(v) {\n    this.#x = v\n\n    const id = this.#id\n    const tree = this.#stateTree\n    if (tree && id !== undefined) {\n      tree.setLocalX(id, v)\n    }\n  }\n\n  get y() { return this.#y }\n  set y(v) {\n    this.#y = v\n\n    const id = this.#id\n    const tree = this.#stateTree\n    if (tree && id !== undefined) {\n      tree.setLocalY(id, v)\n    }\n  }\n\n  get scaleX() { return this.#scaleX }\n  set scaleX(v) {\n    this.#scaleX = v\n\n    const id = this.#id\n    const tree = this.#stateTree\n    if (tree && id !== undefined) {\n      tree.setLocalScaleX(id, v)\n    }\n  }\n\n  get scaleY() { return this.#scaleY }\n  set scaleY(v) {\n    this.#scaleY = v\n\n    const id = this.#id\n    const tree = this.#stateTree\n    if (tree && id !== undefined) {\n      tree.setLocalScaleY(id, v)\n    }\n  }\n\n  get pivotX() { return this.#pivotX }\n  set pivotX(v) {\n    this.#pivotX = v\n\n    const id = this.#id\n    const tree = this.#stateTree\n    if (tree && id !== undefined) {\n      tree.setLocalPivotX(id, v)\n    }\n  }\n\n  get pivotY() { return this.#pivotY }\n  set pivotY(v) {\n    this.#pivotY = v\n\n    const id = this.#id\n    const tree = this.#stateTree\n    if (tree && id !== undefined) {\n      tree.setLocalPivotY(id, v)\n    }\n  }\n\n  get rotation() { return this.#rotation }\n  set rotation(v) {\n    if (this.#rotation !== v) {\n      this.#rotation = v\n\n      const cos = Math.cos(v)\n      const sin = Math.sin(v)\n      this.#cos = cos\n      this.#sin = sin\n\n      const id = this.#id\n      const tree = this.#stateTree\n      if (tree && id !== undefined) {\n        tree.setLocalRotation(id, v)\n        tree.setLocalCos(id, cos)\n        tree.setLocalSin(id, sin)\n      }\n    }\n  }\n\n  setStateTree(id: number, tree: ObjectStateTree) {\n    this.#id = id\n    this.#stateTree = tree\n\n    tree.setLocalX(id, this.#x)\n    tree.setLocalY(id, this.#y)\n    tree.setLocalScaleX(id, this.#scaleX)\n    tree.setLocalScaleY(id, this.#scaleY)\n    tree.setLocalPivotX(id, this.#pivotX)\n    tree.setLocalPivotY(id, this.#pivotY)\n    tree.setLocalRotation(id, this.#rotation)\n    tree.setLocalCos(id, this.#cos)\n    tree.setLocalSin(id, this.#sin)\n  }\n\n  clearStateTree() {\n    this.#id = undefined\n    this.#stateTree = undefined\n  }\n}\n"]}