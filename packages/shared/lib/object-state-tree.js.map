{"version":3,"file":"object-state-tree.js","sourceRoot":"","sources":["../src/object-state-tree.ts"],"names":[],"mappings":"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","sourcesContent":["import { SabTree } from './sab-tree/sab-tree'\n\nconst CAPACITY = 1_000_000 as const\n\n// ===== Boolean Indices =============================================================================\nconst BOOLEAN_COUNT = 0 as const\n\n// ===== Uint32 Indices =============================================================================\nconst UINT32_COUNT = 3 as const\nconst OBJECT_TYPE_IDX = 0 as const\n\n// Sprite / Animation\nconst ASSET_ID_IDX = 1 as const\n\n// Animation\nconst ANIMATION_ID_IDX = 2 as const\n\n// Physics\nconst BODY_ID_IDX = 1 as const\n\n// ===== Float32 Indices =============================================================================\nconst FLOAT32_COUNT = 18 as const\n\n// Local Transform\nconst LOCAL_X_IDX = 0 as const\nconst LOCAL_Y_IDX = 1 as const\nconst LOCAL_SCALE_X_IDX = 2 as const\nconst LOCAL_SCALE_Y_IDX = 3 as const\nconst LOCAL_PIVOT_X_IDX = 4 as const\nconst LOCAL_PIVOT_Y_IDX = 5 as const\nconst LOCAL_ROTATION_IDX = 6 as const\nconst LOCAL_COS_IDX = 7 as const\nconst LOCAL_SIN_IDX = 8 as const\nconst LOCAL_ALPHA_IDX = 9 as const\n\n// World Transform\nconst WORLD_X_IDX = 10 as const\nconst WORLD_Y_IDX = 11 as const\nconst WORLD_SCALE_X_IDX = 12 as const\nconst WORLD_SCALE_Y_IDX = 13 as const\nconst WORLD_ROTATION_IDX = 14 as const\nconst WORLD_COS_IDX = 15 as const\nconst WORLD_SIN_IDX = 16 as const\nconst WORLD_ALPHA_IDX = 17 as const\n\nexport class ObjectStateTree extends SabTree {\n  constructor(sab: SharedArrayBuffer) {\n    super(sab, BOOLEAN_COUNT, UINT32_COUNT, FLOAT32_COUNT, CAPACITY)\n  }\n\n  static bytesRequired() { return SabTree.bytesRequired(BOOLEAN_COUNT, UINT32_COUNT, FLOAT32_COUNT, CAPACITY) }\n\n  setObjectType(id: number, v: number) { this.setUint32(id, OBJECT_TYPE_IDX, v) }\n  getObjectType(id: number) { return this.getUint32(id, OBJECT_TYPE_IDX) }\n\n  setLocalX(id: number, v: number) { this.setFloat32(id, LOCAL_X_IDX, v) }\n  getLocalX(id: number) { return this.getFloat32(id, LOCAL_X_IDX) }\n\n  setLocalY(id: number, v: number) { this.setFloat32(id, LOCAL_Y_IDX, v) }\n  getLocalY(id: number) { return this.getFloat32(id, LOCAL_Y_IDX) }\n\n  setLocalScaleX(id: number, v: number) { this.setFloat32(id, LOCAL_SCALE_X_IDX, v) }\n  getLocalScaleX(id: number) { return this.getFloat32(id, LOCAL_SCALE_X_IDX) }\n\n  setLocalScaleY(id: number, v: number) { this.setFloat32(id, LOCAL_SCALE_Y_IDX, v) }\n  getLocalScaleY(id: number) { return this.getFloat32(id, LOCAL_SCALE_Y_IDX) }\n\n  setLocalPivotX(id: number, v: number) { this.setFloat32(id, LOCAL_PIVOT_X_IDX, v) }\n  getLocalPivotX(id: number) { return this.getFloat32(id, LOCAL_PIVOT_X_IDX) }\n\n  setLocalPivotY(id: number, v: number) { this.setFloat32(id, LOCAL_PIVOT_Y_IDX, v) }\n  getLocalPivotY(id: number) { return this.getFloat32(id, LOCAL_PIVOT_Y_IDX) }\n\n  setLocalRotation(id: number, v: number) { this.setFloat32(id, LOCAL_ROTATION_IDX, v) }\n  getLocalRotation(id: number) { return this.getFloat32(id, LOCAL_ROTATION_IDX) }\n\n  setLocalCos(id: number, v: number) { this.setFloat32(id, LOCAL_COS_IDX, v) }\n  getLocalCos(id: number) { return this.getFloat32(id, LOCAL_COS_IDX) }\n\n  setLocalSin(id: number, v: number) { this.setFloat32(id, LOCAL_SIN_IDX, v) }\n  getLocalSin(id: number) { return this.getFloat32(id, LOCAL_SIN_IDX) }\n\n  setLocalAlpha(id: number, v: number) { this.setFloat32(id, LOCAL_ALPHA_IDX, v) }\n  getLocalAlpha(id: number) { return this.getFloat32(id, LOCAL_ALPHA_IDX) }\n\n  setWorldX(id: number, v: number) { this.setFloat32(id, WORLD_X_IDX, v) }\n  getWorldX(id: number) { return this.getFloat32(id, WORLD_X_IDX) }\n\n  setWorldY(id: number, v: number) { this.setFloat32(id, WORLD_Y_IDX, v) }\n  getWorldY(id: number) { return this.getFloat32(id, WORLD_Y_IDX) }\n\n  setWorldScaleX(id: number, v: number) { this.setFloat32(id, WORLD_SCALE_X_IDX, v) }\n  getWorldScaleX(id: number) { return this.getFloat32(id, WORLD_SCALE_X_IDX) }\n\n  setWorldScaleY(id: number, v: number) { this.setFloat32(id, WORLD_SCALE_Y_IDX, v) }\n  getWorldScaleY(id: number) { return this.getFloat32(id, WORLD_SCALE_Y_IDX) }\n\n  setWorldRotation(id: number, v: number) { this.setFloat32(id, WORLD_ROTATION_IDX, v) }\n  getWorldRotation(id: number) { return this.getFloat32(id, WORLD_ROTATION_IDX) }\n\n  setWorldCos(id: number, v: number) { this.setFloat32(id, WORLD_COS_IDX, v) }\n  getWorldCos(id: number) { return this.getFloat32(id, WORLD_COS_IDX) }\n\n  setWorldSin(id: number, v: number) { this.setFloat32(id, WORLD_SIN_IDX, v) }\n  getWorldSin(id: number) { return this.getFloat32(id, WORLD_SIN_IDX) }\n\n  setWorldAlpha(id: number, v: number) { this.setFloat32(id, WORLD_ALPHA_IDX, v) }\n  getWorldAlpha(id: number) { return this.getFloat32(id, WORLD_ALPHA_IDX) }\n\n  setAssetId(id: number, v: number) { this.setUint32(id, ASSET_ID_IDX, v) }\n  getAssetId(id: number) { return this.getUint32(id, ASSET_ID_IDX) }\n\n  setAnimationId(id: number, v: number) { this.setUint32(id, ANIMATION_ID_IDX, v) }\n  getAnimationId(id: number) { return this.getUint32(id, ANIMATION_ID_IDX) }\n\n  setBodyId(id: number, v: number) { this.setUint32(id, BODY_ID_IDX, v) }\n  getBodyId(id: number) { return this.getUint32(id, BODY_ID_IDX) }\n}\n"]}